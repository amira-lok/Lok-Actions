      # Push changed files to Lokalise Branch
      - name: Push files to Lokalise Branch
        if: ${{ env.IS_DEFAULT_BRANCH == 'false' }} # Only run if IS_DEFAULT_BRANCH is false AND if Lokalise Branch does not exist
        env:
          LOKALISE_CLI_ADD_PARAMS: ${{ vars.LOKALISE_PUSH_ADDITIONAL_PARAMS }} # Not sure if it should have the same name as for push with tags
        run: |
          # Fetch the branch name from lokalise_branch.txt
          LOKALISE_BRANCH=$(cat lokalise_branch.txt)
          echo "Send files to Lokalise branch: $LOKALISE_BRANCH"
          
          # Read changed files from changed_files.txt
          if [ -f changed_files.txt ]; then
            changed_files=$(cat changed_files.txt | grep -E '^pub/locales/en/.*\.json$')
          else
            echo "No changed_files.txt file found. Exiting."
            exit 1
          fi
            
          echo "Changed files to push to Lokalise:"
          echo "$changed_files"
        
          # Loop through each changed file and upload it to Lokalise
          for file in $changed_files; do
            if [ -f "$file" ]; then
              echo "Uploading $file to Lokalise..."
              ./bin/lokalise2 --token="${{ env.LOKALISE_API_TOKEN }}" \
              --project-id="${{ env.LOKALISE_PROJECT_ID }}:$LOKALISE_BRANCH" \
              file upload \
              --file="$file" \
              --lang-iso="${{ env.LOKALISE_SOURCE_LANG_ISO }}" \
              --replace-modified \
              --include-path \
              --distinguish-by-file \
              --poll \
              --poll-timeout=120s \
              --tag-inserted-keys \
              --tag-skipped-keys=true \
              --tag-updated-keys \
              --tags ${{ env.GIT_BRANCH_NAME }}
            else
              echo "File $file does not exist."
            fi
          done

      # Push all localization files to Lokalise Master
      - name: Push all localization files to Lokalise Master
        if: ${{ env.IS_DEFAULT_BRANCH == 'true' }}  # Only run if IS_DEFAULT_BRANCH is true  
        run: |
          # Fetch the branch name from lokalise_branch.txt
          LOKALISE_BRANCH=$(cat lokalise_branch.txt)
          echo "Fetched Lokalise branch name: $LOKALISE_BRANCH"
          
          # Find all relevant localization files
          localization_files=$(find ${{ vars.LOKALISE_TRANSLATIONS_PATH }} -type f -name "*.json")
          echo "Found localization files:"
          echo "$localization_files"
          
          # Loop through each localization file and upload it to Lokalise
          for file in $localization_files; do
            if [ -f "$file" ]; then
              echo "Uploading $file to Lokalise..."
              ./bin/lokalise2 --token="${{ env.LOKALISE_API_TOKEN }}" \
              --project-id="${{ env.LOKALISE_PROJECT_ID }}" \
              file upload \
              --file="$file" \
              --lang-iso="${{ env.LOKALISE_SOURCE_LANG_ISO }}" \
              --replace-modified \
              --include-path \
              --distinguish-by-file \
              --poll \
              --poll-timeout=120s \
              --tag-inserted-keys \
              --tag-skipped-keys=true \
              --tag-updated-keys \
              --tags ${{ env.GIT_BRANCH_NAME }}
            else
              echo "File $file does not exist."
            fi
          done
